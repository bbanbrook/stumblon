var placeSearch, autocomplete,autocomplete1;



function initAutocomplete() {
  // Create the autocomplete object, restricting the search to geographical
  // location types.
if(document.getElementById('_address')){
  autocomplete = new google.maps.places.Autocomplete(
      /** @type {!HTMLInputElement} */(document.getElementById('_address')),
      {types: ['geocode']});

  // When the user selects an address from the dropdown, populate the address
  // fields in the form.
  autocomplete.addListener('place_changed', fillInAddress);
  }


if(document.getElementById('_address1')){
   // location types.
  autocomplete1 = new google.maps.places.Autocomplete(
      /** @type {!HTMLInputElement} */(document.getElementById('_address1')),
      {types: ['geocode']});

  // When the user selects an address from the dropdown, populate the address
  // fields in the form.
  autocomplete1.addListener('place_changed', fillInAddress1);

}
}

function getPostalCode(latitude,longitude){
    var url="http://maps.googleapis.com/maps/api/geocode/json?latlng="+
        latitude+","+longitude+"&sensor=true";


    		jQuery.getJSON(url,function(response){
	  //	console.log(response);
		if(response.results){
			dataResult = response.results;
            var searchAddressComponents = dataResult[0].address_components,
               postalcode="";

           jQuery.each(searchAddressComponents, function(){
                if(this.types[0]=="postal_code"){
                    postalcode=this.long_name;
                }
            });
         jQuery('#_postalcode').val(postalcode);
		}

		});
}

// [START region_fillform]
function fillInAddress() {
  // Get the place details from the autocomplete object.
  var place = autocomplete.getPlace();
//  console.log(place);
  var latitude = place.geometry.location.lat();
var longitude = place.geometry.location.lng();
// console.log(longitude);
 jQuery('#_latitude').val(latitude);
 jQuery('#_longitude').val(longitude);
 getPostalCode(latitude,longitude);
}
    //dokan-form-group

 // [START region_fillform]
function fillInAddress1() {
  // Get the place details from the autocomplete object.
  var place = autocomplete1.getPlace();
   for (var i = 0; i < place.address_components.length; i++) {
      for (var j = 0; j < place.address_components[i].types.length; j++) {
        if (place.address_components[i].types[j] == "postal_code") {
          var postal_code = place.address_components[i].long_name;
        }
      }
    }
//  console.log(place);
  var latitude = place.geometry.location.lat();
var longitude = place.geometry.location.lng();
// console.log(longitude);
 jQuery('#_latitude1').val(latitude);
 jQuery('#_longitude1').val(longitude);
 jQuery('#_postalcode1').val(postal_code);
 getPostalCode(latitude,longitude);
}
